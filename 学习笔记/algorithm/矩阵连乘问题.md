# 矩阵连乘问题
## 描述
![1]

![2]

## 矩阵连乘有多少种运算顺序
矩阵连乘，无论怎么乘，最后一步的激素都是两个矩阵相乘。
也就是 $A[1,n]=A[1,k]×A[k+1,n]$ 得到。

由此可以得到总的相乘次序的总数:
$P(n) = \begin{cases}
1 &,n=1\\
P(n - k)×P(k) &,n > 1
\end{cases}$
也就是 catalan数

## 矩阵连乘的最少乘法次数
定义：A[i,j]表示A[i]×A[i+1],,,×A[j]
以A[1,3]分析：
A[1,3]的所有子问题为：A\[1\],A\[2\],A\[3\],A\[1,2\]A\[2,3\]
由此可见，子问题至少需要2个变量（下标才能描述）

定义：
1. m[i,j]表示第i个矩阵连乘到第j个矩阵的最少乘法次数。
2. 第i个矩阵的维度为$p_{i-1}×p_j$
基于：矩阵连乘，无论怎么乘，最后一步的激素都是两个矩阵相乘
那么有$m[i,j] = min(m[i,k]+m[k,j]+p_{i-1}p_kp_j)$

实现代码时，为什么是枚举长度来递推，而不是直接枚举i，j来递推
1. 枚举i，j无法计算
2. 子问题的长度更小
    以n=3为例，子问题有A1,A2,A3,A1A2,A2A3
    而A1A2的子问题为A1,A2
    也就是，“长度”小的为“长度”大的问题的子问题。因此枚举长度。

## 实现
实现的时候，二维矩阵实际上只有了一半，那么我们可以上三角存放最优值，下三角来存放最优解，那么就可以减少一半的空间消耗。

[2]:assets/矩阵连乘问题-20c7f.png
[1]:assets/矩阵连乘问题-bc24f.png
